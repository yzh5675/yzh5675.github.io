---
title: 注解与反射详解
date: 2021-09-26 08:47:24
tags: Java
author: 别听学唱情歌
img: https://yzh5675.oss-cn-beijing.aliyuncs.com/blog/img/akl05
categories: Java
abbrlink: dxi2
top: false
cover: true
toc: false
copyright: true
toc_number: true
mathjax: true
keywords: 
- 注解 
- 反射
description: Java中Annotation(注解)与反射概念
summary: Java中Annotation(注解)与反射概念
---

# 注解与反射

## 一、注解

##### 一、注解的概述(Annotation)

​	1.注解：代码里的特殊标记，这些标记可以再编译、类加载、运行时读取，并执行相应的处理

##### 二、三大基本注解

​	@Override: 限定重写父类方法, 该注解只能用于方法。
​	@Deprecated: 用于表示所修饰的元素(类, 方法等)已过时。通常是因为所修饰的结构危险或存在更好的选择。
​	@SuppressWarnings: 抑制编译器警告

##### 三、自定义注解

1.加@interface关键字

2.① 元注解：描述注解的注解
   ② 元注解有哪些？

```java
@Inherited		// 使该注解具有继承性，自动继承
@Retention(RetentionPolicy.RUNTIME)		// 在运行时保留该注解
@Target({ElementType.TYPE, ElementType.FIELD, ElementType.METHOD, ElementType.PARAMETER, 
		ElementType.CONSTRUCTOR,  ElementType.LOCAL_VARIABLE,ElementType.TYPE_PARAMETER, 	 	 ElementType.TYPE_USE})		// 用于修饰哪些程序元素
@Documented		// 用于指定被该元 Annotation 修饰的 Annotation 类将被 javadoc 工具提取成文档
```


​	③ 自定义注解

```java
@ 元注解		// 表示用在什么地方
public @interface 注解名{
	// 注解执行的代码
}
```

##### 四、为什么使用注解

​	简化开发步骤，去除繁冗的xml代码

##### 五、优点和缺点

###### 	优点：

​		① 保存在 class 文件中，降低维护成本。 
　　		② 无需工具支持，无需解析。 
　　		③ 编译期即可验证正确性，查错变得容易。 
　　		④ 提升开发效率。 

###### 	缺点：

​		① 若要对配置项进行修改，不得不修改 Java 文件，重新编译打包应用。 
　　② 配置项编码在 Java 文件中，可扩展性差。    



## 二、反射

##### 一、Class类

​	1、概述：Class本身也是一个类，Class对象只能有系统建立对象，一个类在 JVM 中只会有一个 Class 实例 ，一个 Class 对象对应的是一个加载到 JVM 中的一个.class 文件
​	2、实例化Class类对象
​		① 若已知具体的类，通过类的 class 属性获取，该方法最为安全可靠，程序性能最高
​		     

```java
	Class clazz = String.class;
	sys:clazz.getName();
```

​		② 已知某个类的实例，调用该实例的 getClass()方法获取 Class 对象

```java
	Person p = new Person();
	Class clazz = p.getClass();
	sys:clazz.getName();
```

​		③ 已知一个类的全类名，且该类在类路径下，可通过 Class 类的静态方法 forName()获取，可能抛出 ClassNotFoundException

```java
	String className = "类路径";
	Class clazz = Class.forName(ClassName);
	sys:clazz.getName();
```

##### 二、反射

​	1、概述：程序在运行时能够获取自身的信息
​	2、作用：
​		① 可以通过类的反射查看类的信息
​		② 使用反射生成并操作对象，调用其方法、属性
​		       生成对象：
​			

```java
String className = "类路径";
Class<?> c1 = Class.forName(className);
Person p = (Person) c1.newInstance();
```

​		调用属性和方法
​			1.调用指定的方法通过反射，调用类中的方法，通过 Method 类完成
​			2.调用指定属性在反射机制中，可以直接通过 Field 类操作类中的属性，通过 Field 类提供的set()和 get()方法就可以完成设置和取得属性内容的操作	

##### 三、反射的优缺点

​	优点：可以实现动态创建对象和编译，体现出很大的灵活性
​	缺点：对性能有影响，反射是解释型操作，比直接进行操作还是慢一点